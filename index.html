<!doctype html>
<html lang="zh-Hant">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>公園轉盤</title>

  <link rel="stylesheet" href="style.css" />
</head>

<body>
  <div class="bg" aria-hidden="true">
    <div class="paper"></div>
  </div>

  <main class="page">
    <section class="card">
      <header class="header">
        <!-- 左上：返回箭頭（恢復） -->
        <button id="undoBtn" class="iconBtn" type="button" aria-label="恢復上一個動作" title="恢復">
          <svg viewBox="0 0 24 24" fill="none" aria-hidden="true">
            <path d="M15 18l-6-6 6-6" stroke="currentColor" stroke-width="2.6" stroke-linecap="round" stroke-linejoin="round"/>
          </svg>
        </button>

        <h1>公園轉盤</h1>

        <!-- 右上：記錄 + 收藏 -->
        <div class="headerRight">
          <button id="recordBtn" class="pillBtn" type="button">記錄</button>
          <button id="favPanelBtn" class="pillBtn pillBtn-heart" type="button">收藏</button>
        </div>
      </header>

      <!-- Filters -->
      <section class="filterRow" aria-label="篩選">
        <div class="filterGroup">
          <label class="filterLabel" for="modeSelect">模式</label>
          <select id="modeSelect" class="filterSelect">
            <option value="all" selected>隨機</option>
            <option value="district">依行政區</option>
            <option value="near">距離我最近</option>
          </select>
        </div>

        <div class="filterGroup" id="districtGroup" hidden>
          <label class="filterLabel" for="districtSelect">行政區</label>
          <select id="districtSelect" class="filterSelect"></select>
        </div>

        <button id="locBtn" class="btn btn-loc" type="button" title="需要定位權限" hidden>
          取得定位
        </button>

        <!-- ✅ 以前的「重置不重複」改成「重新整理」 -->
        <button id="refreshBtn" class="btn btn-reset" type="button" title="重新整理（例如定位後刷新最近公園）">
          重新整理
        </button>

        <p id="filterHint" class="filterHint" aria-live="polite"></p>
      </section>

      <section id="wheelSection" class="wheelSection hidden">
        <div class="wheelStage">
          <div class="wheelFrame">
            <div class="pointer" aria-hidden="true"></div>

            <div id="wheelRotator" class="wheelRotator">
              <svg id="wheelSvg" class="wheelSvg" viewBox="0 0 400 400" aria-label="轉盤"></svg>
              <button class="centerBtn" type="button" aria-hidden="true" disabled></button>
            </div>
          </div>
        </div>

        <div class="spinRow">
          <button id="spinBtn" class="btn btn-spin" type="button">
            <span class="btnIcon" aria-hidden="true">
              <svg viewBox="0 0 24 24" fill="none">
                <path d="M8 5l12 7-12 7V5z" fill="currentColor"/>
              </svg>
            </span>
            <span id="spinText">開始轉動！</span>
          </button>

          <button id="btnNewBatch" class="btn btn-batch" type="button">
            換一批
          </button>
        </div>

        <div id="result" class="result hidden" role="status" aria-live="polite">
          <p class="resultHint">今天就去</p>
          <p id="resultName" class="resultName">—</p>

          <div class="resultActions">
            <a id="mapBtn" class="btn btn-map" href="#" target="_blank" rel="noopener noreferrer" aria-disabled="true">
              打開地圖
            </a>

            <button id="preserveBtn" class="btn btn-preserve hidden" type="button" title="不要封印這個公園，也不記錄">
              保留
            </button>

            <button id="favBtn" class="btn btn-fav hidden" type="button" title="加入收藏">
              ♥
            </button>
          </div>

          <p class="resultHint">玩吧！🎉</p>
        </div>
      </section>

      <section id="emptyState" class="emptyState">
        <p id="emptyText">正在載入公園資料…</p>
      </section>
    </section>
  </main>

  <!-- ✅ 記錄面板 -->
  <section id="recordPanel" class="panelOverlay hidden" aria-hidden="true">
    <div class="panelCard" role="dialog" aria-label="紀錄">
      <div class="panelHeader">
        <div class="panelTitle">紀錄</div>
        <div class="panelHeaderActions">
          <!-- ✅ 一鍵刪除＝舊「重置不重複」 -->
          <button id="recordClearBtn" class="btnMini" type="button">一鍵刪除</button>
          <button id="recordCloseBtn" class="iconBtnSmall" type="button" aria-label="關閉">×</button>
        </div>
      </div>

      <p id="recordEmpty" class="panelEmpty">(還沒有紀錄)</p>
      <ul id="recordList" class="panelList"></ul>
    </div>
  </section>

  <!-- ✅ 收藏面板（你要的：在記錄下方的收藏 UI） -->
  <section id="favPanel" class="panelOverlay hidden" aria-hidden="true">
    <div class="panelCard" role="dialog" aria-label="收藏">
      <div class="panelHeader">
        <div class="panelTitle">收藏</div>
        <div class="panelHeaderActions">
          <button id="favPanelClearBtn" class="btnMini" type="button">清空</button>
          <button id="favPanelCloseBtn" class="iconBtnSmall" type="button" aria-label="關閉">×</button>
        </div>
      </div>

      <p id="favPanelEmpty" class="panelEmpty">(還沒有收藏)</p>
      <ul id="favPanelList" class="panelList"></ul>
    </div>
  </section>

  <!-- love modal（保留你原本的彩蛋結構，若沒有也不會壞） -->
  <section id="loveModal" class="modalOverlay hidden" aria-hidden="true">
    <div class="modalCard" role="dialog" aria-label="彩蛋">
      <p class="modalText">人瑄學姊笑起來真的很好看，我很喜歡學姊</p>
      <button id="loveCloseBtn" class="btn btn-spin" type="button">知道了</button>
    </div>
  </section>

  <script src="./app.js" defer></script>
</body>
</html>


