<!-- index.html -->
<!doctype html>
<html lang="zh-Hant">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>公園轉盤</title>

  <link rel="apple-touch-icon" sizes="180x180" href="./icons/icon-180.png">
  <meta name="apple-mobile-web-app-title" content="公園轉盤">

  <link rel="stylesheet" href="style.css" />
</head>

<body>
  <div class="bg" aria-hidden="true">
    <div class="paper"></div>
  </div>

  <main class="page">
    <section class="card">
      <header class="header">
        <!-- ✅ 左邊：返回箭頭（恢復） -->
        <div class="headerActions headerActionsLeft" aria-label="左側工具">
          <button id="undoBtn" class="btn btn-undo" type="button" title="恢復上一個動作" aria-label="恢復上一個動作">
            <svg class="undoIcon" viewBox="0 0 24 24" fill="none" aria-hidden="true">
              <path d="M15 6L9 12L15 18" stroke="currentColor" stroke-width="3" stroke-linecap="round" stroke-linejoin="round"/>
            </svg>
          </button>
        </div>

        <!-- ✅ 1) 標題改成「公園轉盤」 -->
        <h1>公園轉盤</h1>

        <!-- ✅ 右邊：記錄 -->
        <div class="headerActions headerActionsRight" aria-label="右側工具">
          <button id="recordBtn" class="btn btn-record" type="button" title="查看記錄">記錄</button>
        </div>
      </header>

      <section class="inputRow">
        <input id="parkInput" type="text" placeholder="輸入公園名稱..." autocomplete="off" />
        <button id="addBtn" class="btn btn-add" type="button" aria-label="加入">
          <span class="btnIcon" aria-hidden="true">
            <svg viewBox="0 0 24 24" fill="none">
              <path d="M12 5v14M5 12h14" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
            </svg>
          </span>
          加入
        </button>
      </section>

      <section class="filterRow" aria-label="篩選">
        <div class="filterGroup" id="modeGroup">
          <label class="filterLabel" for="modeSelect">模式</label>
          <select id="modeSelect" class="filterSelect">
            <option value="all" selected>隨機</option>
            <option value="district">依行政區</option>
            <option value="near">距離我最近</option>
          </select>
        </div>

        <div class="filterGroup" id="districtGroup">
          <label class="filterLabel" for="districtSelect">行政區</label>
          <select id="districtSelect" class="filterSelect"></select>
        </div>

        <button id="locBtn" class="btn btn-loc" type="button" title="需要定位權限">
          取得定位
        </button>

        <button id="resetNoRepeatBtn" class="btn btn-reset" type="button" title="清除不重複紀錄">
          重置不重複
        </button>

        <p id="filterHint" class="filterHint" aria-live="polite"></p>
      </section>

      <section id="wheelSection" class="wheelSection hidden">
        <div class="wheelStage">
          <div class="wheelFrame">
            <div class="pointer" aria-hidden="true"></div>

            <div id="wheelRotator" class="wheelRotator">
              <svg id="wheelSvg" class="wheelSvg" viewBox="0 0 400 400" aria-label="轉盤"></svg>
              <button id="centerBtn" class="centerBtn" type="button" aria-label="中心按鈕" disabled aria-hidden="true"></button>
            </div>
          </div>
        </div>

        <div class="spinRow">
          <button id="spinBtn" class="btn btn-spin" type="button">
            <span class="btnIcon" aria-hidden="true">
              <svg viewBox="0 0 24 24" fill="none">
                <path d="M8 5l12 7-12 7V5z" fill="currentColor"/>
              </svg>
            </span>
            <span id="spinText">開始轉動！</span>
          </button>

          <button id="btnNewBatch" class="btn btn-batch" type="button">
            換一批
          </button>
        </div>

        <div id="result" class="result hidden" role="status" aria-live="polite">
          <p class="resultHint">今天就去</p>
          <p id="resultName" class="resultName">—</p>

          <div class="resultActions">
            <a id="mapBtn" class="btn btn-map" href="#" target="_blank" rel="noopener noreferrer" aria-disabled="true">
              打開地圖
            </a>

            <button id="preserveBtn" class="btn btn-preserve hidden" type="button" title="不要封印這個公園，之後仍可再抽到">
              保留
            </button>

            <button id="favBtn" class="btn btn-fav hidden" type="button" title="把這個公園收藏起來">
              <span class="heart" aria-hidden="true">♥</span> 收藏
            </button>
          </div>

          <p class="resultHint">玩吧！🎉</p>
        </div>
      </section>

      <section id="emptyState" class="emptyState">
        <p id="emptyText">正在載入公園資料…</p>
      </section>

      <!-- ✅ 4) 收藏區塊：從底部移除，改到「記錄」面板內 -->

      <div id="recordPanel" class="panel hidden" role="dialog" aria-modal="true" aria-label="轉盤記錄">
        <div class="panelCard">
          <div class="panelHeader">
            <h3 class="panelTitle">記錄</h3>
            <button id="recordCloseBtn" class="btn btn-panelClose" type="button" aria-label="關閉記錄">關閉</button>
          </div>

          <p class="panelHint">✅ 重複只記一次｜🗑 刪除後此公園會重新變成「可被抽到」</p>

          <!-- ✅ 3) 改名＋✅ 4) 放在記錄下方（點記錄才展開） -->
          <section id="favSection" class="favSection">
            <header class="favHeader">
              <h2 class="favTitle">喜歡的公園</h2>
              <button id="favClearBtn" class="btn btn-favClear" type="button" title="清空收藏">
                清空
              </button>
            </header>

            <ul id="favList" class="favList" aria-label="收藏清單"></ul>
            <p id="favEmpty" class="favEmpty">（還沒有收藏）</p>
          </section>

          <ul id="recordList" class="recordList"></ul>
          <p id="recordEmpty" class="recordEmpty">（還沒有記錄）</p>
        </div>
      </div>

      <div id="loveModal" class="modal hidden" role="dialog" aria-modal="true" aria-label="完成訊息">
        <div class="modalCard">
          <p class="modalText">人瑄學姊笑起來真的很好看，我很喜歡學姊</p>
          <button id="loveCloseBtn" class="btn btn-modalClose" type="button">知道了</button>
        </div>
      </div>

    </section>
  </main>

  <script src="./app.js" defer></script>
</body>
</html>





